# 创作指数（Contribution Heatmap）模块 PRD

## 文档版本记录

| 版本   | 日期         | 作者           | 变更说明 |
| ---- | ---------- | ------------ | ---- |
| v0.1 | 2025‑07‑25 | 产品专家 ChatGPT | 初稿   |

---

## 1. 概述

在博客首页新增 **“创作指数”** 模块，借鉴 GitHub Contribution Heatmap 形式，展示博主过去 2 年（日粒度）的内容创作活跃度，帮助用户直观感受到博主的持续产出能力与活跃水平。

- **展示范围**：当前年份（默认）与上一自然年，可通过下拉或切换按钮选择。
- **粒度**：按日统计创作次数（文章发布 / 更新 / 均计 1 次）。
- **呈现方式**：7×53 的周历热力图；颜色深浅代表贡献次数多少。

---

## 2. 背景 & 目标

| 项目背景                                   | 项目目标                                                            |
| -------------------------------------- | --------------------------------------------------------------- |
| 个人博客缺乏“持续创作”量化表达，访客无法迅速了解博主活跃度，影响信任与关注 | 1. 以可视化方式提升博主个人品牌可信度2. 为访客提供快速了解博主活跃度的入口3. 促进博主打卡式写作，提高平台整体内容产出 |

---

## 4. 角色 & 使用场景

| 角色 | 目标          | 关注点           |
| -- | ----------- | ------------- |
| 访客 | 快速判断博主活跃度   | 热图数据真实、直观切换流畅 |
| 博主 | 展示创作成果，激励自己 | 数据准确、统计口径清晰   |

---

## 5. 功能需求

### 5.1 年份切换

- **范围**：`今年`、`去年`（系统自动计算当前年份与上一年）
- **交互**：点击 Tab/下拉实时刷新热图；保留滚动位置
- **默认值**：当前年份
- **可扩展**：后续支持更多年份（留接口）

### 5.2图展示

| #    | 需求点       | 说明                                    |
| ---- | --------- | ------------------------------------- |
| F‑01 | 7×53 网格   | 行=星期，列=周；按 ISO‑8601 周序号排布             |
| F‑02 | 颜色分级      | 4 级深浅（如浅灰→深绿）；0 次为灰色                  |
| F‑03 | Hover 提示  | 鼠标悬停显示日期 & 贡献次数移动端长按 600 ms 弹 Tooltip |                                    |
| F‑05 | Loading 态 | null不展示               |
| F‑06 | 空数据       | 若全年无贡献，则显示提示语“快来写下第一篇文章吧！”            |

### 5.3 数据统计口径

- **贡献定义**：
  - 发布博文（status = `published`）
  - 更新博文（`updated_at` 当天，且差异 >100 字）
- **去重策略**：同一天多次操作按次数累积，不做合并
- **更新频率**：实时更新

---

## 6. 交互设计

### 6.1 组件结构

```
┌─────────────┐
│ 年份切换 Tabs │
├─────────────┤
│ Heatmap Grid │
└─────────────┘
```

- 移动端：Tabs 横向滚动，一屏最多展示 12 列，左右拖动查看历史周
- 桌面端：整年 53 列自适应容器宽度

### 6.2 交互流程

1. 页面加载 → 请求 API `/api/contributions?year=YYYY`
2. 返回数据 → 生成热图 → 首屏呈现
3. 用户点击年份 → 前端重新请求 → 替换热图

---

## 7. 数据 & API

### 7.1 数据模型（简化）

```ts
interface ContributionDay {
  date: string;   // YYYY-MM-DD
  count: number;  // 贡献次数
}
```

### 7.2 REST API

| 方法  | 路径                         | 入参            | 出参                                  | 说明            |
| --- | -------------------------- | ------------- | ----------------------------------- | ------------- |
| GET | /api/contributions         | year (number) | `ContributionDay[]`                 | 返回指定年份贡献日历    |
| GET | /api/contributions/summary | none          | { total, maxStreak, currentStreak } | 统计信息，可用于标题下注解 |

---


## 12. 参考链接

- GitHub Contribution Graph 设计规范
- D3 Calendar Heatmap 示例

---

> 本文档为内部使用，未经许可请勿外传。

